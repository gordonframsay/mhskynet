<html>
  <head>
    <style>
      body,html {
        margin:0;
        padding:0;
      }
      canvas {
        background-color: black;
      }
    </style>
  </head>
  <body>
    <canvas></canvas>
  </body>
  <script>
 function m_set_dist(cx, cy) {
   var max_iter = 100;
   var xorbit = new Array(max_iter + 1);
   var yorbit = new Array(max_iter + 1);
   var dist = 0.0;
   var temp = 0.0;
   var x = 0.0;
   xorbit[0] = 0.0; 
   yorbit[0] = 0.0; 
   var huge = 1000.0;
   var yder = 0.0;
   var xder = 0.0;
   var x2 = 0.0;
   var y2 = 0.0;
   var y = 0.0;
   var x = 0.0;
   var iter = 1;
   var overflow =  1.0e100;
   while ((iter < max_iter) && ((x2+y2) < huge)) {
    temp = x2 - y2 + cx;
    y = 2.0 * x * y + cy;
    x = temp;
    x2 = x*x;
    y2 = y*y;
    xorbit[iter] = x;
    yorbit[iter] = y;
    iter += 1;
   }
   var flag = false;
   if ( (x2+y2) > huge ) {
    var i = 0;
    while ( ( i < iter ) && (! flag) ) {
     temp = 2.0 * (xorbit[i] * xder - yorbit[i] * yder + 1.0);
     yder = 2.0 * (yorbit[i] * xder + xorbit[i] * yder);
     xder = temp;
     flag = Math.max(Math.abs(xder),Math.abs(yder)) > overflow;
     i += 1;
    }
    if (! flag) {
     dist = Math.log(x2+y2)*Math.sqrt(x2+y2)/Math.sqrt(xder*xder+yder*yder);
    }
   }
  return dist;
 }

  function draw_m() {
   var canvas = document.querySelector('canvas');
   var ctx = canvas.getContext('2d');
   var width = 150; /* window.innerWidth; */
   var height = 100; /* window.innerHeight */ 
   canvas.width = width;
   canvas.height = height;
   for (var x = 0; x < width; x++) {
    for (var y = 0; y < height; y++) {
     var dist = m_set_dist(((x / width) * 3) - 2, (y / height) * 2 - 1)
     var color = (Math.round(dist * 70000) % 255);
     if (dist > 0) {
      ctx.fillStyle = 'rgb('+color+','+color+',0)';
     } else {
      ctx.fillStyle = 'rgb(200,200,255)';
     }
     ctx.fillRect(x, y, 1, 1);
    }
   }
  }

  draw_m();

  </script>
</html>
